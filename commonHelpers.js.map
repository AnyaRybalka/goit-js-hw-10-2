{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst refs = {\n    inputEl: document.querySelector(\"input#datetime-picker\"),\n    buttonEl: document.querySelector(\"button[data-start]\"),\n    spanDays: document.querySelector(\"span[data-days]\"),\n    spanHours: document.querySelector(\"span[data-hours]\"),\n    spanMinutes: document.querySelector(\"span[data-minutes]\"),\n    spanSeconds: document.querySelector(\"span[data-seconds]\")\n};\n\nlet intervalId;\nrefs.buttonEl.disabled = true;\nlet hasError = false;\nlet selectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates, dateStr, instance) {\n        clearInterval(intervalId);\n        selectedDate = selectedDates[0];\n        const currentDate = new Date();\n\n        if (selectedDate < currentDate) {\n            if (!hasError) {\n                iziToast.show({\n                    title: 'Warning',\n                    message: 'Please choose a date in the future',\n                    position: 'topRight'\n                });\n                hasError = true;\n            }\n            refs.buttonEl.disabled = true;\n            updateTimerDisplay(null);\n\n        } else {\n            hasError = false;\n            refs.buttonEl.disabled = false;\n        }\n        refs.inputEl.disabled = false;\n    },\n};\n\nflatpickr(refs.inputEl, options);\nrefs.buttonEl.addEventListener(\"click\", () => {\n    intervalId = setInterval(() => {\n        checkDates(selectedDate);\n    }, 1000);\n    refs.inputEl.disabled = true;\n    refs.buttonEl.disabled = true;\n});\nfunction updateTimerDisplay(ms) {\n    if (ms === null || isNaN(ms)) {\n        refs.spanDays.textContent = \"00\";\n        refs.spanHours.textContent = \"00\";\n        refs.spanMinutes.textContent = \"00\";\n        refs.spanSeconds.textContent = \"00\";\n    } else {\n        const time = convertMs(ms);\n        refs.spanDays.textContent = String(time.days).padStart(2, '0');\n        refs.spanHours.textContent = String(time.hours).padStart(2, '0');\n        refs.spanMinutes.textContent = String(time.minutes).padStart(2, '0');\n        refs.spanSeconds.textContent = String(time.seconds).padStart(2, '0');\n    }\n}\n\nfunction checkDates(selectedDate) {\n    const currentDate = new Date();\n    if (selectedDate < currentDate) {\n        if (!hasError) {\n            iziToast.show({\n                title: 'Warning',\n                message: 'Дія тармеру заверешилась',\n                position: 'topRight'\n            });\n            hasError = true;\n        }\n        refs.buttonEl.disabled = true;\n        updateTimerDisplay(null);\n        clearInterval(intervalId);\n        return;\n    } else {\n        hasError = false;\n        const difference = selectedDate - currentDate;\n        updateTimerDisplay(difference);\n    }\n}\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n"],"names":["refs","intervalId","hasError","selectedDate","options","selectedDates","dateStr","instance","currentDate","iziToast","updateTimerDisplay","flatpickr","checkDates","ms","time","convertMs","difference","days","hours","minutes","seconds"],"mappings":"+IAOA,MAAMA,EAAO,CACT,QAAS,SAAS,cAAc,uBAAuB,EACvD,SAAU,SAAS,cAAc,oBAAoB,EACrD,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,CAC5D,EAEA,IAAIC,EACJD,EAAK,SAAS,SAAW,GACzB,IAAIE,EAAW,GACXC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAeC,EAASC,EAAU,CACtC,cAAcN,CAAU,EACxBE,EAAeE,EAAc,GAC7B,MAAMG,EAAc,IAAI,KAEpBL,EAAeK,GACVN,IACDO,EAAS,KAAK,CACV,MAAO,UACP,QAAS,qCACT,SAAU,UAC9B,CAAiB,EACDP,EAAW,IAEfF,EAAK,SAAS,SAAW,GACzBU,EAAmB,IAAI,IAGvBR,EAAW,GACXF,EAAK,SAAS,SAAW,IAE7BA,EAAK,QAAQ,SAAW,EAC3B,CACL,EAEAW,EAAUX,EAAK,QAASI,CAAO,EAC/BJ,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC1CC,EAAa,YAAY,IAAM,CAC3BW,EAAWT,CAAY,CAC1B,EAAE,GAAI,EACPH,EAAK,QAAQ,SAAW,GACxBA,EAAK,SAAS,SAAW,EAC7B,CAAC,EACD,SAASU,EAAmBG,EAAI,CAC5B,GAAIA,IAAO,MAAQ,MAAMA,CAAE,EACvBb,EAAK,SAAS,YAAc,KAC5BA,EAAK,UAAU,YAAc,KAC7BA,EAAK,YAAY,YAAc,KAC/BA,EAAK,YAAY,YAAc,SAC5B,CACH,MAAMc,EAAOC,EAAUF,CAAE,EACzBb,EAAK,SAAS,YAAc,OAAOc,EAAK,IAAI,EAAE,SAAS,EAAG,GAAG,EAC7Dd,EAAK,UAAU,YAAc,OAAOc,EAAK,KAAK,EAAE,SAAS,EAAG,GAAG,EAC/Dd,EAAK,YAAY,YAAc,OAAOc,EAAK,OAAO,EAAE,SAAS,EAAG,GAAG,EACnEd,EAAK,YAAY,YAAc,OAAOc,EAAK,OAAO,EAAE,SAAS,EAAG,GAAG,CACtE,CACL,CAEA,SAASF,EAAWT,EAAc,CAC9B,MAAMK,EAAc,IAAI,KACxB,GAAIL,EAAeK,EAAa,CACvBN,IACDO,EAAS,KAAK,CACV,MAAO,UACP,QAAS,2BACT,SAAU,UAC1B,CAAa,EACDP,EAAW,IAEfF,EAAK,SAAS,SAAW,GACzBU,EAAmB,IAAI,EACvB,cAAcT,CAAU,EACxB,MACR,KAAW,CACHC,EAAW,GACX,MAAMc,EAAab,EAAeK,EAClCE,EAAmBM,CAAU,CAChC,CACL,CACA,SAASD,EAAUF,EAAI,CAQnB,MAAMI,EAAO,KAAK,MAAMJ,EAAK,KAAG,EAE1BK,EAAQ,KAAK,MAAOL,EAAK,MAAO,IAAI,EAEpCM,EAAU,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,EAEjDO,EAAU,KAAK,MAASP,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}